var Me=Object.create;var I=Object.defineProperty;var Oe=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,qe=Object.prototype.hasOwnProperty;var R=n=>I(n,"__esModule",{value:!0});var E=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Ne=(n,t)=>{R(n);for(var e in t)I(n,e,{get:t[e],enumerable:!0})},Fe=(n,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Le(t))!qe.call(n,r)&&r!=="default"&&I(n,r,{get:()=>t[r],enumerable:!(e=Oe(t,r))||e.enumerable});return n},O=n=>Fe(R(I(n!=null?Me(Ve(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var ee=E(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});var Re=require("os"),Be=require("child_process"),ze=require("fs"),Ge=require("path");function L(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var V=L(Re),A=L(ze),T=L(Ge),We=(n,t=1,e)=>{if(e={indent:" ",includeEmptyLines:!1,...e},typeof n!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof n}\``);if(typeof t!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if(typeof e.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof e.indent}\``);if(t===0)return n;let r=e.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return n.replace(r,e.indent.repeat(t))},B=/\s+at.*(?:\(|\s)(.*)\)?/,Je=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,Ue=typeof V.default.homedir=="undefined"?"":V.default.homedir(),Xe=(n,t)=>(t=Object.assign({pretty:!1},t),n.replace(/\\/g,"/").split(`
`).filter(e=>{let r=e.match(B);if(r===null||!r[1])return!0;let a=r[1];return a.includes(".app/Contents/Resources/electron.asar")||a.includes(".app/Contents/Resources/default_app.asar")?!1:!Je.test(a)}).filter(e=>e.trim()!=="").map(e=>t.pretty?e.replace(B,(r,a)=>r.replace(a,a.replace(Ue,"~"))):e).join(`
`)),Ye=n=>n.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),z=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);t=[...t].map(r=>r instanceof Error?r:r!==null&&typeof r=="object"?Object.assign(new Error(r.message),r):new Error(r));let e=t.map(r=>typeof r.stack=="string"?Ye(Xe(r.stack)):String(r)).join(`
`);e=`
`+We(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(let t of this._errors)yield t}},Ke=z,Qe=async(n,t,{concurrency:e=1/0,stopOnError:r=!0}={})=>new Promise((a,i)=>{if(typeof t!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(e)||e===1/0)&&e>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${e}\` (${typeof e})`);let s=[],l=[],u=n[Symbol.iterator](),o=!1,c=!1,d=0,f=0,p=()=>{if(o)return;let g=u.next(),m=f;if(f++,g.done){c=!0,d===0&&(!r&&l.length!==0?i(new Ke(l)):a(s));return}d++,(async()=>{try{let y=await g.value;s[m]=await t(y,m),d--,p()}catch(y){r?(o=!0,i(y)):(l.push(y),d--,p())}})()};for(let g=0;g<e&&(p(),!c);g++);}),G=(n,t,e)=>new Promise((r,a)=>{if(e=Object.assign({concurrency:1/0},e),typeof t!="function")throw new TypeError("Mapper function is required");let{concurrency:i}=e;if(!(typeof i=="number"&&i>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${i}\` (${typeof i})`);let s=[],l=n[Symbol.iterator](),u=!1,o=!1,c=0,d=0,f=()=>{if(u)return;let p=l.next(),g=d;if(d++,p.done){o=!0,c===0&&r(s);return}c++,Promise.resolve(p.value).then(m=>t(m,g)).then(m=>{s[g]=m,c--,f()},m=>{u=!0,a(m)})};for(let p=0;p<i&&(f(),!o);p++);}),W=G,Ze=G;W.default=Ze;var J=async(n,t,e)=>(await W(n,(a,i)=>Promise.all([t(a,i),a]),e)).filter(a=>Boolean(a[0])).map(a=>a[1]),U=J,et=J;U.default=et;var k=typeof atom!="undefined",tt=typeof atom!="undefined"&&(atom.inDevMode()||atom.inSpecMode()),q="atom-package-deps.ignored";var nt=/["'&<>]/,X=rt;function rt(n){var t=""+n,e=nt.exec(t);if(!e)return t;var r,a="",i=0,s=0;for(i=e.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==i&&(a+=t.substring(s,i)),s=i+1,a+=r}return s!==i?a+t.substring(s,i):a}async function at(n,t,e){let r=Be.spawn(n,t,e),a=new Promise((i,s)=>{let l={stdout:r.stdout?[]:null,stderr:r.stderr?[]:null};r.on("error",s),r.stdout&&r.stdout.on("data",function(u){l.stdout.push(u),e.handleStdout&&e.handleStdout(u)}),r.stderr&&r.stderr.on("data",function(u){l.stderr.push(u),e.handleStderr&&e.handleStderr(u)}),r.on("close",u=>{let o=null;l.stdout!=null&&(o=e.encoding===null||e.encoding==="buffer"?Buffer.concat(l.stdout):l.stdout.join(""));let c=null;l.stderr!=null&&(c=e.encoding===null||e.encoding==="buffer"?Buffer.concat(l.stderr):l.stderr.join("")),i({exitCode:u,stdout:o,stderr:c})})});return e.handleChildProcess(r),a}function it(n,t,e){let r,a=at(n,t,{...e,handleChildProcess(i){r=i}});return a.kill=function(i){return r.kill(i)},a}var ot=function(t,e){for(var r=t.split("."),a=e.split("."),i=0;i<3;i++){var s=Number(r[i]),l=Number(a[i]);if(s>l)return 1;if(l>s)return-1;if(!isNaN(s)&&isNaN(l))return 1;if(isNaN(s)&&!isNaN(l))return-1}return 0};async function st(n){let t=atom.packages.getLoadedPackage(n),e=t&&t.metadata["package-deps"];return Array.isArray(e)?e:[]}async function lt(n){return atom.packages.resolvePackagePath(n)}async function ct(n){var t;let e=atom.packages.getLoadedPackage(n.name);return e==null?null:(t=e.metadata.version)!==null&&t!==void 0?t:null}async function ut(n){let t=null;try{t=await A.default.promises.stat(n)}catch(a){}if(t==null||!t.isDirectory())throw new Error("[Package-Deps] Expected packageName to be a readable directory in Node.js invocation");let e=null;try{let a=await A.default.promises.readFile(T.default.join(n,"package.json"),"utf8");e=JSON.parse(a)}catch(a){}let r=e==null||typeof e!="object"?[]:e["package-deps"];return Array.isArray(r)?r:[]}async function dt(n){var t;let e=T.default.join((t=process.env.ATOM_HOME)!==null&&t!==void 0?t:T.default.join(V.default.homedir(),".atom"),"packages",n);try{return await A.default.promises.access(e,A.default.constants.R_OK),e}catch(r){return null}}async function ft(n){var t,e;let{directory:r}=n;if(r==null)return null;let a=null;try{a=JSON.parse(await A.default.promises.readFile(T.default.join(r,"package.json"),"utf8"))}catch(i){return null}return(t=(e=a)===null||e===void 0?void 0:e.version)!==null&&t!==void 0?t:null}async function pt(n){if(k){let t=await ct(n);if(t)return t}return ft(n)}var Y=k?lt:dt;function x(n,t){if(!n)throw new Error(t??"Invariant violation")}async function gt(n){let t=await(k?st(n):ut(n));return tt&&(x(Array.isArray(t),`Dependencies for ${n} are not a valid array`),t.forEach((e,r)=>{if(Array.isArray(e))e.forEach((a,i)=>{let s=`Dependency#${r}#${i} for ${n} is invalid`;x(typeof a.name=="string"&&a.name.length>0,s),x(a.minimumVersion==null||typeof a.minimumVersion=="string"&&a.minimumVersion.length>0,s)}),x(e.length>0,`Dependency#${r} for ${n} has no group items`);else{let a=`Dependency#${r} for ${n} is invalid`;x(typeof e.name=="string"&&e.name.length>0,a),x(e.minimumVersion==null||typeof e.minimumVersion=="string"&&e.minimumVersion.length>0,a)}})),t}async function K(n){if(n.directory==null)return!0;if(n.minimumVersion==null)return!1;let t=await pt(n);return t==null?!0:ot(n.minimumVersion,t)===1}function mt(n){var t;return k?!!((t=atom.config.get(q))!==null&&t!==void 0?t:[]).includes(n):!1}function ht(n){var t;if(!k)return;let e=new Set((t=atom.config.get(q))!==null&&t!==void 0?t:[]);e.add(n),atom.config.set(q,Array.from(e))}var vt=new Set(["\u2713","done"]),yt=/(?:Installing|Moving) (.*?) to .* (.*)/;async function wt(n){let t=k?`"${atom.packages.getApmPath()}"`:"apm",{stdout:e,stderr:r}=await it(t,["install",n.name,"--production","--color","false"],{shell:!0}),a=yt.exec(e.trim());if(a!=null&&vt.has(a[2]))return;let i=new Error(`Error installing dependency: ${n.name}`);throw i.stack=r.trim(),i}async function Q(n){if(typeof n=="string")return{name:n,directory:await Y(n)};if("name"in n)return{...n,directory:await Y(n.name)};throw console.error("This package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works",{entry:n}),Error("The package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works")}var Z=!0;function bt({packageName:n,dependencies:t}){return new Promise(e=>{let r=t.filter(c=>!Array.isArray(c)),a=t.filter(c=>Array.isArray(c)),i=a.length===0,s=i?r.map(c=>c.name).join(", "):"Something went wrong. Check your developer console",l=a.map(c=>c[0]);atom.packages.isPackageDisabled("notifications")&&console.warn(`Enable notifications to install dependencies for ${n}`);let u=atom.notifications.addInfo(`${n} needs to install dependencies`,{dismissable:!0,icon:"cloud-download",detail:s,description:`Install dependenc${t.length===1?"y":"ies"}?`,buttons:[{text:"Yes",onDidClick:()=>{e(i?r:r.concat(l)),u.dismiss()}},{text:"No Thanks",onDidClick:()=>{u.dismiss()}},{text:"Never",onDidClick:()=>{ht(n),Z&&(Z=!1,atom.notifications.addInfo("How to reset package-deps memory",{dismissable:!0,description:"To modify the list of ignored files invoke 'Application: Open Your Config' and change the 'atom-package-deps' section"})),u.dismiss()}}]});if(u.onDidDismiss(()=>e([])),!i)try{var o;let c=atom.views.getView(u),d=(o=c==null?void 0:c.element)!==null&&o!==void 0?o:null;if(d==null)throw new Error("Unable to get notification element from view");let f=d.querySelector(".detail-content");if(f==null)throw new Error("Content detail container not found inside the notification");if(f.innerHTML="",r.length>0){let m=document.createElement("div");m.innerHTML=`Packages without choices: <br /><ul><li>${r.map(y=>X(y.name)).join("</li><li>")}</li></ul>`,f.appendChild(m)}let p=document.createElement("div");p.innerHTML="Packages with choices:",f.appendChild(p);let g=document.createElement("ul");a.forEach((m,y)=>{let M=document.createElement("li"),S=document.createElement("select");S.innerHTML=m.map(D=>`<option>${X(D.name)}</option>`).join(`
`),S.addEventListener("change",()=>{let D=m.find(je=>je.name===S.value);D!=null&&(l[y]=D)}),M.style.marginTop="5px",M.appendChild(S),g.appendChild(M)}),f.appendChild(g)}catch(c){console.error("[Package-Deps] Error during showing package choices to user",c)}})}function Et({packageName:n,dependencies:t}){let e=[],r=atom.notifications.addInfo(`Installing ${n} dependencies`,{detail:`Installing ${t.map(s=>s.name).join(", ")}`,dismissable:!0}),a=document.createElement("progress");a.max=t.length,a.style.width="100%";try{var i;let s=atom.views.getView(r),l=(i=s==null?void 0:s.element)!==null&&i!==void 0?i:null;if(l==null)throw new Error("Unable to get notification element from view");let u=l.querySelector(".detail-content");if(u==null)throw new Error("Content detail container not found inside the notification");u.appendChild(a)}catch(s){console.error("[Package-Deps] Error during showing installation progress to user",s)}return{handleFailure({dependency:s,error:l}){var u;e.push(s.name),a.value+=1,console.error(`[Package-Deps] Unable to install ${s.name}, Error:`,(u=l==null?void 0:l.stack)!==null&&u!==void 0?u:l)},handleDependencyInstalled(s){a.value+=1},handleComplete(){r.dismiss(),e.length>0?atom.notifications.addWarning(`Failed to install ${n} dependencies`,{detail:`These packages were not installed, check your console
for more info.
${e.join(`
`)}`,dismissable:!0}):atom.notifications.addSuccess(`Installed ${n} dependencies`,{detail:`Installed ${t.map(s=>s.name).join(", ")}`}),Promise.all(t.map(s=>e.includes(s.name)?null:atom.packages.activatePackage(s.name))).catch(s=>{console.error(`[Package-Deps] Error activating installed packages for ${n}`,s)})}}}async function kt({dependencies:n}){return n.map(t=>Array.isArray(t)?t[0]:t)}function xt({dependencies:n}){let t=!1;return console.log(`Installing dependencies:
${n.map(e=>`  - ${e.name}`).join(`
`)}`),{handleFailure({dependency:e,error:r}){var a;t=!0,console.error(`Unable to install ${e.name}, Error:`,(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:r)},handleDependencyInstalled(e){console.log("Successfully installed",e.name)},handleComplete(){console.log("Installation complete"),t&&(process.exitCode=1)}}}var Pt=k?Et:xt,_t=k?bt:kt;async function $t(n,t=!1){if(x(typeof n=="string"&&n.length>0,"[Package-Deps] Package name is required"),mt(n))return;let e=await gt(n);if(e.length===0)return;let r=await Promise.all(e.map(async l=>Array.isArray(l)?Promise.all(l.map(Q)):Q(l))),a=await U(r,async function(l){return Array.isArray(l)?(await Promise.all(l.map(u=>K(u)))).every(Boolean):K(l)});if(a.length===0)return;let i;if(t?i=a.map(l=>Array.isArray(l)?l[0]:l):i=await _t({packageName:n,dependencies:a}),i.length===0)return;let s=Pt({packageName:n,dependencies:i});await Qe(i,async function(l){try{await wt(l),s.handleDependencyInstalled(l)}catch(u){s.handleFailure({dependency:l,error:u})}},{concurrency:2}),s.handleComplete()}N.install=$t});var ne=E((cn,F)=>{"use strict";var te=()=>{let n=Error.prepareStackTrace;Error.prepareStackTrace=(e,r)=>r;let t=new Error().stack.slice(1);return Error.prepareStackTrace=n,t};F.exports=te;F.exports.default=te});var ae=E((un,re)=>{"use strict";var At=ne();re.exports=({depth:n=0}={})=>{let t=[],e=new Set;for(let r of At()){let a=r.getFileName(),i=r.getTypeName()!==null&&a!==null;if(e.has(a)||(e.add(a),t.unshift(r)),i)return t[n]}}});var le=E(w=>{"use strict";var St=w&&w.__awaiter||function(n,t,e,r){function a(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function l(c){try{o(r.next(c))}catch(d){s(d)}}function u(c){try{o(r.throw(c))}catch(d){s(d)}}function o(c){c.done?i(c.value):a(c.value).then(l,u)}o((r=r.apply(n,t||[])).next())})},Dt=w&&w.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(o){return function(c){return u([o,c])}}function u(o){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(i=o[0]&2?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,a=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(n,e)}catch(c){o=[6,c],a=0}finally{r=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(w,"__esModule",{value:!0});w.readManifestSync=w.readManifest=void 0;var ie=require("path"),It=ie.resolve,Tt=ie.sep,oe=require("fs"),Ct=oe.promises,jt=oe.readFileSync,Mt=ae();function Ot(n){return n===void 0&&(n=""),St(this,void 0,void 0,function(){var t,e,r;return Dt(this,function(a){switch(a.label){case 0:t=se(n),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Ct.readFile(t,"utf8")];case 2:return e=a.sent(),[2,JSON.parse(e)];case 3:return r=a.sent(),[2,null];case 4:return[2]}})})}w.readManifest=Ot;function Lt(n){n===void 0&&(n="");var t=se(n);try{var e=jt(t,"utf8");return JSON.parse(e)}catch(r){return null}}w.readManifestSync=Lt;function se(n){n=(n==null?void 0:n.length)?n:Vt();var t=atom.packages.resolvePackagePath(n),e=It(t,"package.json");return e}function Vt(){var n=Mt().getFileName(),t=atom.packages.getPackageDirPaths(),e=t.filter(function(r){return n.startsWith(r)});return(e==null?void 0:e.length)&&n.replace(e[0],"").split(Tt).filter(function(r){return r})[0]||""}});var ce=E(b=>{"use strict";var C=b&&b.__assign||function(){return C=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},C.apply(this,arguments)},qt=b&&b.__awaiter||function(n,t,e,r){function a(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function l(c){try{o(r.next(c))}catch(d){s(d)}}function u(c){try{o(r.throw(c))}catch(d){s(d)}}function o(c){c.done?i(c.value):a(c.value).then(l,u)}o((r=r.apply(n,t||[])).next())})},Nt=b&&b.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(o){return function(c){return u([o,c])}}function u(o){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(i=o[0]&2?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,a=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(n,e)}catch(c){o=[6,c],a=0}finally{r=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(b,"__esModule",{value:!0});b.satisfyDependencies=void 0;var Ft=ee(),Ht=le(),Rt={logger:console.log};function Bt(n,t){return t===void 0&&(t={}),qt(this,void 0,void 0,function(){var e,r;return Nt(this,function(a){switch(a.label){case 0:return e=C(C({},Rt),t),[4,Ht.readManifest(n)];case 1:return r=a.sent(),[4,Ft.install(r.name)];case 2:return a.sent(),zt(r["package-deps"],e),[2]}})})}b.satisfyDependencies=Bt;function zt(n,t){t.enableDependencies&&n["package-deps"].map(function(e){atom.packages.isPackageDisabled(e)&&(atom.inDevMode()&&t.logger("["+n.name+"] Enabling package dependency '"+e+"'"),atom.packages.enablePackage(e))})}});var me=E((vn,ge)=>{ge.exports=pe;pe.sync=Jt;var de=require("fs");function Wt(n,t){var e=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!e||(e=e.split(";"),e.indexOf("")!==-1))return!0;for(var r=0;r<e.length;r++){var a=e[r].toLowerCase();if(a&&n.substr(-a.length).toLowerCase()===a)return!0}return!1}function fe(n,t,e){return!n.isSymbolicLink()&&!n.isFile()?!1:Wt(t,e)}function pe(n,t,e){de.stat(n,function(r,a){e(r,r?!1:fe(a,n,t))})}function Jt(n,t){return fe(de.statSync(n),n,t)}});var be=E((yn,we)=>{we.exports=ve;ve.sync=Ut;var he=require("fs");function ve(n,t,e){he.stat(n,function(r,a){e(r,r?!1:ye(a,t))})}function Ut(n,t){return ye(he.statSync(n),t)}function ye(n,t){return n.isFile()&&Xt(n,t)}function Xt(n,t){var e=n.mode,r=n.uid,a=n.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),l=parseInt("100",8),u=parseInt("010",8),o=parseInt("001",8),c=l|u,d=e&o||e&u&&a===s||e&l&&r===i||e&c&&i===0;return d}});var ke=E((bn,Ee)=>{var wn=require("fs"),j;process.platform==="win32"||global.TESTING_WINDOWS?j=me():j=be();Ee.exports=H;H.sync=Yt;function H(n,t,e){if(typeof t=="function"&&(e=t,t={}),!e){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,a){H(n,t||{},function(i,s){i?a(i):r(s)})})}j(n,t||{},function(r,a){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,a=!1),e(r,a)})}function Yt(n,t){try{return j.sync(n,t||{})}catch(e){if(t&&t.ignoreErrors||e.code==="EACCES")return!1;throw e}}});var De=E((En,Se)=>{var $=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",xe=require("path"),Kt=$?";":":",Pe=ke(),_e=n=>Object.assign(new Error(`not found: ${n}`),{code:"ENOENT"}),$e=(n,t)=>{let e=t.colon||Kt,r=n.match(/\//)||$&&n.match(/\\/)?[""]:[...$?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(e)],a=$?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=$?a.split(e):[""];return $&&n.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:r,pathExt:i,pathExtExe:a}},Ae=(n,t,e)=>{typeof t=="function"&&(e=t,t={}),t||(t={});let{pathEnv:r,pathExt:a,pathExtExe:i}=$e(n,t),s=[],l=o=>new Promise((c,d)=>{if(o===r.length)return t.all&&s.length?c(s):d(_e(n));let f=r[o],p=/^".*"$/.test(f)?f.slice(1,-1):f,g=xe.join(p,n),m=!p&&/^\.[\\\/]/.test(n)?n.slice(0,2)+g:g;c(u(m,o,0))}),u=(o,c,d)=>new Promise((f,p)=>{if(d===a.length)return f(l(c+1));let g=a[d];Pe(o+g,{pathExt:i},(m,y)=>{if(!m&&y)if(t.all)s.push(o+g);else return f(o+g);return f(u(o,c,d+1))})});return e?l(0).then(o=>e(null,o),e):l(0)},Qt=(n,t)=>{t=t||{};let{pathEnv:e,pathExt:r,pathExtExe:a}=$e(n,t),i=[];for(let s=0;s<e.length;s++){let l=e[s],u=/^".*"$/.test(l)?l.slice(1,-1):l,o=xe.join(u,n),c=!u&&/^\.[\\\/]/.test(n)?n.slice(0,2)+o:o;for(let d=0;d<r.length;d++){let f=c+r[d];try{if(Pe.sync(f,{pathExt:a}))if(t.all)i.push(f);else return f}catch(p){}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw _e(n)};Se.exports=Ae;Ae.sync=Qt});Ne(exports,{activate:()=>tn,config:()=>Zt,deactivate:()=>nn,provideBuilder:()=>en});var h="build-vite";var v={schema:{viteLocation:{title:"Vite Location",description:"Specify whether to use global or local `vite` installation",type:"string",default:"local",enum:[{value:"local",description:"Local Vite"},{value:"global",description:"Global Vite"}],order:0},customBuildArguments:{title:"Build Arguments",description:"Set custom arguments for `vite build`",type:"array",default:[],items:{type:["string","integer"]},order:1},customPreviewArguments:{title:"Preview Arguments",description:"Set custom arguments for `vite preview`",type:"array",default:[],items:{type:["string","integer"]},order:2},customOptimizeArguments:{title:"Optimize Arguments",description:"Set custom arguments for `vite optimize`",type:"array",default:[],items:{type:["string","integer"]},order:3},manageDependencies:{title:"Manage Dependencies",description:"When enabled, third-party dependencies will be installed automatically",type:"boolean",default:!0,order:4},alwaysEligible:{title:"Always Eligible",description:"The build provider will be available in your project, even when not eligible",type:"boolean",default:!1,order:5}},get(n=""){return n?.length?atom.config.get(`${h}.${n}`):atom.config.get(`${h}`)},migrate(n,t){if(!(!atom.config.get(`${h}.${n}`)||atom.config.get(`${h}.${t}`))){try{atom.config.set(`${h}.${t}`,atom.config.get(`${h}.${n}`))}catch(e){atom.notifications.addWarning("Failed to migrate configuration, see console for details");return}atom.config.unset(`${h}.${n}`)}},unset(n=""){let t=n?.length?`${h}.${n}`:h;atom.config.unset(t)},async open(n={}){n={pending:!0,searchAllPanes:!0,...n},await atom.workspace.open(`atom://config/packages/${h}`,n)}};var Ie=O(require("events")),Te=O(ce());function P(n,t){for(var e=0,r=t.length,a=n.length;e<r;e++,a++)n[a]=t[e];return n}var Gt=function(){function n(t){t===void 0&&(t={}),this.name=t.name,this.styleSheet=`
      background-color: `+(t.backgroundColor||"darkgrey")+`;
      border-radius: 2px;
      color: `+(t.color||"white")+`;
      line-height: 1.5;
      padding: 1px 4px;
      text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);
    `}return n.prototype.__console__=function(t){for(var e,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];!(atom==null?void 0:atom.inDevMode())||(r.unshift("%c"+this.name+"%c",this.styleSheet,""),(e=window.console)[t].apply(e,r))},n.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,P(["debug"],t))},n.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,P(["error"],t))},n.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,P(["info"],t))},n.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,P(["log"],t))},n.prototype.trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,P(["trace"],t))},n.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,P(["warn"],t))},n}(),ue=Gt;var _=new ue({name:h,backgroundColor:"#646cff"});var Ce=O(De()),Zt=v.schema;function en(){return class extends Ie.EventEmitter{constructor(t){super();this.cwd=t,atom.config.observe("build-vite.customBuildArguments",()=>this.emit("refresh")),atom.config.observe("build-vite.customPreviewArguments",()=>this.emit("refresh")),atom.config.observe("build-vite.customOptimizeArguments",()=>this.emit("refresh")),atom.config.observe("build-vite.alwayEligible",()=>this.emit("refresh"))}getNiceName(){return"Vite"}isEligible(){return v.get("alwaysEligible")===!0?(_.log("Always eligible"),!0):Ce.default.sync(this.getExec(),{nothrow:!0})?(_.log("Build provider is eligible"),!0):(_.error("Build provider isn't eligible"),!1)}getExec(){return v.get("viteLocation")==="local"?"npx":"vite"}settings(){let t=v.get("viteLocation"),e=this.getExec();return[{name:"Vite: build",exec:e,args:t==="local"?["vite","build",v.get("customBuildArguments")]:["build",v.get("customBuildArguments")],cwd:"{PROJECT_PATH}",sh:!1,atomCommandName:"vite:build"},{name:"Vite: optimize",exec:e,args:t==="local"?["vite","optimize",v.get("customOptimizeArguments")]:["optimize",v.get("customOptimizeArguments")],cwd:"{PROJECT_PATH}",sh:!1,atomCommandName:"vite:optimize"},{name:"Vite: preview",exec:e,args:t==="local"?["vite","preview",v.get("customPreviewArguments")]:["preview",v.get("customPreviewArguments")],cwd:"{PROJECT_PATH}",sh:!1,atomCommandName:"vite:preview"}]}}}function tn(){_.log("Activating package"),v.get("manageDependencies")===!0&&(0,Te.satisfyDependencies)(h)}function nn(){_.log("Deactivating package")}0&&(module.exports={activate,config,deactivate,provideBuilder});
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=provider.js.map
